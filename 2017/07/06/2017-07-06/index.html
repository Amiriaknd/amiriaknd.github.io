<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Javascript 笔记 --- 上传 · Lord Camelot</title><meta name="description" content="Javascript 笔记 --- 上传 - Amiria"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Lord Camelot"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">月光食堂</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="mailto:amiriaknd@outlook.com" target="_self" class="nav-list-link">MAILTOME</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Javascript 笔记 --- 上传</h1><div class="post-info">Jul 6, 2017</div><div class="post-content"><h4 id="lt-input-type-quot-file-quot-gt"><a href="#lt-input-type-quot-file-quot-gt" class="headerlink" title="&lt;input type=&quot;file&quot;&gt;"></a><code>&lt;input type=&quot;file&quot;&gt;</code></h4><p><strong>属性<code>accept=&quot;&quot;</code></strong><br>accept只是为上传文件的类型提供一个默认的搜索过滤，而不会强制要求必须上传这种类型的文件，可以上传任意的文件且浏览器都会接受</p>
<a id="more"></a>
<p>设置<code>accept=&quot;video/*&quot;</code>，在上传文件的时候选择“全部文件”。<br>上传一个jpg文件：<br><img src="1-1.png" alt="Alt text"></p>
<p>上传一个exe文件：<br><img src="1-2.png" alt="Alt text"></p>
<p>甚至可以上传一个随便起的后缀文件：<br><img src="1-3.png" alt="Alt text"></p>
<p>可见当浏览器上传以后，浏览器会自动确定文件的类型，与accept规定的类型无关</p>
<p>accept的值可以是以下：</p>
<ul>
<li><code>file_extension</code>  文件扩展名，如<code>.gif</code>, <code>.jpg</code>, <code>.png</code>。<blockquote>
<p>值得一提的是，如果留空，则上传文件的窗口默认为全部文件。<br>如果是自定义的后缀如.asd文件，默认过滤出ASD文件<br>如果定义多个文件，如”.jpg, .png”，上传文件的窗口显示“自定义文件”，但过滤规则一样有效，会过滤出所有的jpg和png文件</p>
</blockquote>
</li>
</ul>
<ul>
<li><code>audio/*</code>  音频文件</li>
<li><code>video/*</code>  视频文件</li>
<li><code>image/*</code>  图像文件</li>
<li><code>media_type</code> <a href="http://www.iana.org/assignments/media-types/media-types.xhtml" target="_blank" rel="external">http://www.iana.org/assignments/media-types/media-types.xhtml</a></li>
</ul>
<hr>
<p><strong>属性multiple</strong></p>
<p><code>multiple=&quot;multiple&quot;</code><br>默认情况下文件只能选一个，设置multiple之后可以选择多个文件</p>
<h4 id="FORMDATA"><a href="#FORMDATA" class="headerlink" title="FORMDATA"></a>FORMDATA</h4><p><code>formdata</code>是可以独立于表单之外的表单数据，可以用来上传二进制文件</p>
<p>使用<code>new FormData()</code>来创建一个formdata对象，然后使用<code>append(name, value, filename)</code>来添加字段。</p>
<p><code>value</code>可以是<code>blob</code>对象、<code>file</code>对象或者字符串。<br>如果value既不是blob对象，也不是file对象的话，它就会被转换为字符串</p>
<p><code>filename</code>是可选的，如果value是blob或file，会被当作文件名来发送到服务器上</p>
<p>formdata无法直接通过<code>console.log()</code>来打印，要想监视formdata的数据，需要使用<code>for(let pair of formdata.entries())</code>，<code>pair</code>是一个数组，<code>0</code>是<code>value</code>，<code>1</code>是<code>file</code></p>
<blockquote>
<p><code>Blob</code>对象表示不可变的类似文件对象的原始数据。Blob表示不一定是JavaScript原生形式的数据。 File 接口基于Blob，继承了 blob的功能并将其扩展使其支持用户系统上的文件。</p>
</blockquote>
</div></article></div></main><footer><div class="paginator"><a href="/2017/07/17/2017-07-17/" class="prev">PREV</a><a href="/2017/06/14/2017-06-14/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://yoursite.com">Amiria</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>